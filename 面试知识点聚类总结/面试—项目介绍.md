- 自我介绍

  > ​	面试官你好，我叫庄杰，是北京邮电大学人工智能学院研一的学生，目前是在做基于人工智能驱动的通信研究。
  >
  > ​	在本科及研究生期间，我曾多次获得学业奖学金、国家励志奖学金等荣誉，同时也参加过一些大大小小的比赛，拿过电子设计竞赛省一等奖，挑战杯国家三等奖，还有各种单片机应用竞赛奖项，虽然大多是一些嵌入式开发的比赛，但多少给我积累了一定的经验和知识。
  >
  > ​	我此次面试的岗位为java后端开发。通过本科四年的积累，我对java编程以及后端知识有一定的了解，如java虚拟机，多线程，数据库等。同时我做过校园在线课程学习交流平台这样一个项目，具备一定的理论知识和开发能力。
  >
  > ​	我个人平时比较喜欢运动，没事喜欢打打球作为自己解压的一种途径。同时呢，我性格也比较和睦，团队合作意识也挺强，希望能通过这次面试加入贵公司，一方面希望能给公司带来一定的效益，另一方面也希望自己的能力能得到进一步提升。

- 项目是哪儿来的

  > ​	这是一个校园竞赛的项目

- 简单介绍一下你做的项目

  > 该项目为B2C模式，分为前台网站系统和后台运营平台，总体功能主要包括课程、讲师的信息管理和展示以及讨论区等，主要用到的技术有：SpringBoot,Mybatis-Plus,Mysql,redis,Nacos,SpringCurity，GateWay，token，阿里云服务

- Gateway，SpringSecurity，OAuth2，token，JWT，Nacos，redis

- 项目中，你遇到过什么问题或困难？

  > 1. 413错误：上传视频，nginx限制了上传视频的大小。修改nginx配置文件
  >
  >    <img src="/Users/jackiez/学海/Java开发笔记/picture/image-20210617215435440.png" alt="image-20210617215435440" style="zoom:50%;" />
  >
  > 2. cookie携带token存在跨域问题
  >
  >    > https://blog.csdn.net/lhr666666/article/details/107477899
  >    >
  >    > https://juejin.cn/post/6844904017965891598
  >    >
  >    > 前端在请求头中添加一个header存放token，不过此时必须在后端跨域设置中允许获得此token所表示的header，不然后端会拦截自定义header。
  >
  > 3. 浏览器禁用cookie
  
- 项目中哪儿地方用到了redis，作用是什么？

  > 1. 解决验证码实效性问题

- 你们项目为什么要用redis？快在哪儿？怎么保证高性能高并发的？

- 一个热榜功能怎么设计，怎么设计缓存，如何保证缓存和数据库的一致性

- tomcat热加载，热部署

- 微服务各组件功能

  > - Nginx和Gateway
  >
  >   > - Nginx
  >   >
  >   >   主要作用：反向代理，负载均衡
  >   >
  >   > - Gateway
  >   >
  >   >   主要作用：<img src="/Users/jackiez/学海/Java开发笔记/picture/image-20210731213116975.png" alt="image-20210731213116975" style="zoom:50%;" />
  >   >
  >   > - Nginx  vs  Gateway
  >   >
  >   >   ​	gateway的负载均衡是内部服务的负载均衡，更贴近于业务后端的技术栈。nginx是gateway的前置负载均衡。一般情况下nginx是处在负载均衡端，gateway处在springcloud集群的入口处，所有流量会先经过nginx负载均衡到gateway上。nginx是为了承压，gateway是抽取各服务的通用功能。
  >
  > - SpringCloud核心组件
  >
  >   > - Eureka : 注册中心，专门负责服务的注册与发现
  >   >
  >   > - SpringCloud Bus：消息总线
  >   >
  >   > - SpringCloud Config：分布式配置中心
  >   >
  >   >   <img src="/Users/jackiez/学海/Java开发笔记/picture/image-20210731220741007.png" alt="image-20210731220741007" style="zoom:33%;" />
  >   >
  >   > - Feign: 服务调用
  >   >
  >   > - Ribbon：负载均衡、
  >   >
  >   > - Hystrix：熔断器
  >   >
  >   > - Gateway：网关
  >   
  > - Nacos
  >
  >   ![image-20210731214413332](/Users/jackiez/学海/Java开发笔记/picture/image-20210731214413332-7739054.png)
  >
  >   <img src="/Users/jackiez/学海/Java开发笔记/picture/image-20210731214829429.png" alt="image-20210731214829429" style="zoom:50%;" />

- 为什么要用微服务，使用微服务后会产生什么问题，如何解决这些问题

- 登录注册模块

  > - jwt，阿里云短信服务，
  >
  > - redis解决验证码有效时间
  >
  >   > 1. 使用RedisTemplete进行操作，请求进来先对参数—phoneNumber进行查redis数据库，若存在则发送已有的验证码或者不发送；若不存在则随机生成验证码并把它存入redis数据库，同时设置过期时间（如五分钟），再将该验证码发给用户。
  >
  > - 开发了三个接口
  >
  >   > - 登录接口
  >   > - 注册接口
  >   > - 根据token获取用户id和用户昵称接口
  >
  > - 注册过程
  >
  >   > - 先获取用户手机号、密码、验证码，判断数据信息非空；
  >   > - 然后将得到的验证码跟redis中的验证码作对比，若不一样或失效，则注册失败。
  >   > - 判断数据库是否存在该手机号，若存在，返回“该手机号已注册”
  >   > - 若都合格，将用户注册信息加入数据库
  >   
  >- 登录过程
  > 
  >  > - 从前端获取用户账号（手机号）和密码信息
  >   >
  >   > - 先查数据库中有没有这个手机号，如果没有,直接返回“登录失败”
  >   >
  >   > - 如果存在这个手机号（账户），再继续查询该账户的密码，与登录密码作对比；若不一致，则返回“登录失败”
  >   >
  >   >   > - 由于数据库不可能将密码进行明文存储，都是经过md5加密的。md5加密是不可逆加密，也就是说它不能被解密（不能被恢复出来，网上的破解方法都是通过对应关系穷举出来的）
  >   >   > - 使用md5相应的工具类
  >   >   > - 加盐？
  >   >
  >   > - 若一致，再判断用户是否被禁用；若没有被禁用，则生成token（使用jwt，将用户id和用户昵称放到有效载荷部分），返回给用户
  >   >
  >   > ![image-20210709160128077](/Users/jackiez/学海/Java开发笔记/picture/image-20210709160128077-5817690.png)
  >   >
  >   > - 前端有拦截器，先拦截请求，查看cookie中有无token，若有，则将token放入request header中
  > 
  >- 微信登录过程
  > 
  >  > - OAuth2是针对特定问题的一种解决方案
  >   >
  >   >   > - 开放系统间授权
  >   >   > - 分布式访问问题（单点登录）
  >   >
  >   > - 流程
  >   >
  >   >   > - 借助腾讯官方文档，生成二维码	
  >   >   >
  >   >   > ![image-20210709170923596](/Users/jackiez/学海/Java开发笔记/picture/image-20210709170923596-5821764.png)
  >   >
  >   > - 时序图
  >   >
  >   >   ![image-20210709164013006](/Users/jackiez/学海/Java开发笔记/picture/image-20210709164013006-5820015.png)
  
- canal数据同步工具

  > - 应用场景： 使用远程服务调用耦合度高，效率相对较低。可以使用同步数据库表的方式来实现

- SpringCloud组件-Gateway网关

  - 网关出现的原因是微服务架构的出现，不同的微服务一般会有不同的网络地址，而外部客户端可能需要调用多个服务的接口才能完成一个业务需求，如果让客户端直接与各个微服务通信，会有以下问题：

    <img src="/Users/jackiez/学海/Java开发笔记/picture/image-20210715094914605.png" alt="image-20210715094914605" style="zoom:150%;" />

  - 可以实现请求转发，负载均衡，权限控制，统一鉴权，路径重写、限流保护等，让api更专注于业务，请求过滤

  - 实现结构图

    ![image-20210715095714313](/Users/jackiez/学海/Java开发笔记/picture/image-20210715095714313-6314236.png)

- Gateway核心概念

  <img src="/Users/jackiez/学海/Java开发笔记/picture/image-20210715100032159.png" alt="image-20210715100032159" style="zoom:200%;" />

- 网关微服务的配置

  <img src="/Users/jackiez/学海/Java开发笔记/picture/image-20210715101227621.png" alt="image-20210715101227621" style="zoom:50%;" />

- GateWay网关实现负载均衡(组件内部自动帮我们选择策略实现)

  ![image-20210715102200858](/Users/jackiez/学海/Java开发笔记/picture/image-20210715102200858-6315723.png)

- 

- 权限管理模块

  >- 需求
  >
  >![image-20210715105334077](/Users/jackiez/学海/Java开发笔记/picture/image-20210715105334077-6317617.png)
  >
  >- 数据库表结构
  >
  >![image-20210715114438482](/Users/jackiez/学海/Java开发笔记/picture/image-20210715114438482.png)
  >
  >- 接口
  >
  >- spring_security
  >
  > 实质上就是拦截器（或者叫过滤器）
  >
  > ![image-20210717222646284](/Users/jackiez/学海/Java开发笔记/picture/image-20210717222646284-6532008.png)
  >
  > <img src="/Users/jackiez/学海/Java开发笔记/picture/image-20210717223245990.png" alt="image-20210717223245990" style="zoom:50%;" />
  >
  >- Nacos
  >
  > > - 注册中心
  > >
  > > - 配置中心
  > >
  > >   ![image-20210717231459273](/Users/jackiez/学海/Java开发笔记/picture/image-20210717231459273-6534900.png)
  > >   
  > > - SpringSecurity
  > >
  > >   > - 拦截器/过滤器：拦截请求，验证身份。可配置相关资源不进行拦截
  
  
