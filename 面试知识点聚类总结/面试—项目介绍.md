- 项目中，你遇到过什么问题或困难？

  > 1. 413错误：上传视频，nginx限制了上传视频的大小。修改nginx配置文件
  >
  >    <img src="/Users/jackiez/学海/Java开发笔记/picture/image-20210617215435440.png" alt="image-20210617215435440" style="zoom:50%;" />

- 项目的优势

- 你们项目为什么要用redis？快在哪儿？怎么保证高性能高并发的？

- redis字典结构的hash问题

- 一个热榜功能怎么设计，怎么设计缓存，如何保证缓存和数据库的一致性

- tomcat热加载，热部署

- 对象头结构

- 为什么要用微服务，使用微服务后会产生什么问题，如何解决这些问题

- 登录注册模块

  > - jwt，阿里云短信服务，
  >
  > - redis解决验证码有效时间
  >
  >   > 1. 使用RedisTemplete进行操作，请求进来先对参数—phoneNumber进行查redis数据库，若存在则发送已有的验证码或者不发送；若不存在则随机生成验证码并把它存入redis数据库，同时设置过期时间（如五分钟），再将该验证码发给用户。
  >
  > - 开发了三个接口
  >
  >   > - 登录接口
  >   > - 注册接口
  >   > - 根据token获取用户id和用户昵称接口
  >
  > - 注册过程
  >
  >   > - 先获取用户手机号、密码、验证码，判断数据信息非空；
  >   > - Bug：一个验证码可以在5分钟内无限被使用？
  >   > - 然后将得到的验证码跟redis中的验证码作对比，若不一样或失效，则注册失败。
  >   > - 判断数据库是否存在该手机号，若存在，返回“该手机号已注册”
  >   > - 若都合格，将用户注册信息加入数据库
  >
  > - 登录过程
  >
  >   > - 从前端获取用户账号（手机号）和密码信息
  >   >
  >   > - 先查数据库中有没有这个手机号，如果没有,直接返回“登录失败”
  >   >
  >   > - 如果存在这个手机号（账户），再继续查询该账户的密码，与登录密码作对比；若不一致，则返回“登录失败”
  >   >
  >   >   > - 由于数据库不可能将密码进行明文存储，都是经过md5加密的。md5加密是不可逆加密，也就是说它不能被解密（不能被恢复出来，网上的破解方法都是通过对应关系穷举出来的）
  >   >   > - 使用md5相应的工具类
  >   >   > - 加盐？
  >   >
  >   > - 若一致，再判断用户是否被禁用；若没有被禁用，则生成token（使用jwt，将用户id和用户昵称放到有效载荷部分），返回给用户
  >   >
  >   > ![image-20210709160128077](/Users/jackiez/学海/Java开发笔记/picture/image-20210709160128077-5817690.png)
  >   >
  >   > - 前端有拦截器，先拦截请求，查看cookie中有无token，若有，则将token放入request header中
  >
  > - 微信登录过程
  >
  >   > - OAuth2是针对特定问题的一种解决方案
  >   >
  >   >   > - 开放系统间授权
  >   >   > - 分布式访问问题（单点登录）
  >   >
  >   > - 流程
  >   >
  >   >   > - 借助腾讯官方文档，生成二维码
  >   >   >
  >   >   > ![image-20210709170923596](/Users/jackiez/学海/Java开发笔记/picture/image-20210709170923596-5821764.png)
  >   >
  >   > - 时序图
  >   >
  >   >   ![image-20210709164013006](/Users/jackiez/学海/Java开发笔记/picture/image-20210709164013006-5820015.png)

- canal数据同步工具

  > - 应用场景： 使用远程服务调用耦合度高，效率相对较低。可以使用同步数据库表的方式来实现

- SpringCloud组件-Gateway网关

  - 网关出现的原因是微服务架构的出现，不同的微服务一般会有不同的网络地址，而外部客户端可能需要调用多个服务的接口才能完成一个业务需求，如果让客户端直接与各个微服务通信，会有以下问题：

    <img src="/Users/jackiez/学海/Java开发笔记/picture/image-20210715094914605.png" alt="image-20210715094914605" style="zoom:150%;" />

  - 可以实现请求转发，负载均衡，权限控制，统一鉴权，路径重写、限流保护等，让api更专注于业务，请求过滤

  - 实现结构图

    ![image-20210715095714313](/Users/jackiez/学海/Java开发笔记/picture/image-20210715095714313-6314236.png)

- Gateway核心概念

  <img src="/Users/jackiez/学海/Java开发笔记/picture/image-20210715100032159.png" alt="image-20210715100032159" style="zoom:200%;" />

- 网关微服务的配置

  <img src="/Users/jackiez/学海/Java开发笔记/picture/image-20210715101227621.png" alt="image-20210715101227621" style="zoom:50%;" />

- GateWay网关实现负载均衡(组件内部自动帮我们选择策略实现)

  ![image-20210715102200858](/Users/jackiez/学海/Java开发笔记/picture/image-20210715102200858-6315723.png)

- 

- 权限管理模块

  >- 需求
  >
  > ![image-20210715105334077](/Users/jackiez/学海/Java开发笔记/picture/image-20210715105334077-6317617.png)
  >
  >- 数据库表结构
  >
  > ![image-20210715114438482](/Users/jackiez/学海/Java开发笔记/picture/image-20210715114438482.png)
  >
  >- 接口
  >
  >- spring_security
  >
  >  实质上就是拦截器（或者叫过滤器）
  >
  >  ![image-20210717222646284](/Users/jackiez/学海/Java开发笔记/picture/image-20210717222646284-6532008.png)
  >
  >  <img src="/Users/jackiez/学海/Java开发笔记/picture/image-20210717223245990.png" alt="image-20210717223245990" style="zoom:50%;" />
  >
  >- Nacos
  >
  >  > - 注册中心
  >  >
  >  > - 配置中心
  >  >
  >  >   ![image-20210717231459273](/Users/jackiez/学海/Java开发笔记/picture/image-20210717231459273-6534900.png)

